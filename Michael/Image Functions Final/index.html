<html>
<script src="https://d3js.org/d3.v4.js"></script>
<script src="https://d3js.org/d3.v4.min.js"></script>
<svg height="1000" width="1000" id="graph2">
</svg>
<script>

// GENERAL HELPERS!

// Next we use a powerScale with exponent 0.5 to change the initial variable
// such that the area is linear and correct
var areaScale= d3.scalePow().
exponent([0.5]);

// Since attr modification takes in a string, we must transform each scale value
// into a string such that .attr("transform", to_string_scale(value)) is in
// an acceptable format
var to_string_scale= function(variable) {
  return "scale(" + variable + ", " + variable + ")";
};

// Transforms x and y coordinates into a translate function string input
// so that it is compatible with a .attr call
var to_string_x_y= function(x, y) {
  return "translate(" + x + "," + y + ")";
};

// Concatenates the transform functions into one, else overwriting will occur
var transformHelper= function(x, y, imageHelperUsed, dataPoint) {
  return to_string_x_y(x, y) + " " + imageHelperUsed(dataPoint);
};


// Pill linear
// Pill data to linear scale
var linearPillsScale= d3.scaleLinear()
.domain([0, 20])
.range([0, 5]);

// Pill sizing
var pillsImageHelper= function(healthData) {
  return to_string_scale(areaScale(linearPillsScale(healthData)));
};

// Select svg2 for pills
var svg2= d3.select("#graph2");

var pillGenerator= function (d) {

  var image= svg2.append("g")
  .attr("transform", transformHelper(d.x, d.y, pillsImageHelper, d.size));

  var innerimage= image.append("g")
  .attr("transform", "translate(-29, -29)")
  .attr("opacity", "0.75")

  innerimage.append("path")
  .attr("d", "M17.775,17.594L4.667,30.702c-6.223,6.223-6.223,16.405,0,22.627h0   c6.223,6.223,16.405,6.223,22.627,0l13.108-13.108L17.775,17.594z")
  .style("fill", "#DD352E")

  innerimage.append("path")
  .attr("d", "M40.422,40.202l12.908-12.907c6.222-6.223,6.222-16.405,0-22.627h0   c-6.223-6.223-16.405-6.223-22.627,0L17.794,17.574L40.422,40.202z")
  .style("fill", "#EBBA16")

  innerimage.append("path")
  .attr("d", "M22.046,21.826l-17.11,17.11c-0.586,0.585-0.586,1.536,0,2.121c0.293,0.293,0.677,0.439,1.061,0.439   s0.768-0.146,1.061-0.439l17.11-17.11L22.046,21.826z")
  .style("fill", "#F46767")

  innerimage.append("path")
  .attr("d", "M24.165,23.948L40.057,8.057c0.586-0.585,0.586-1.536,0-2.121c-0.586-0.586-1.535-0.586-2.121,0   L22.044,21.827L24.165,23.948z")
  .style("fill", "#FCD770")
}


// var exampleArray= [{"x": 40, "y":50, "size": 3},
// {"x": 850, "y":20, "size": 5},
// {"x": 500, "y":500, "size": 4},
// {"x": 50, "y":600, "size": 8},
// {"x": 900, "y":700, "size": 3}];
//
// exampleArray.forEach(function (d) {
//   svg2.append("circle")
//   .attr("r", 3)
//   .attr("cx", d.x)
//   .attr("cy", d.y)
// });
//
// exampleArray.forEach(function (d) {
//   pillGenerator(d);
// });

// Edu linear
// TODO: Edu data to linear scale
var linearEduScale= d3.scaleLinear()
.domain([0, 20])
.range([0, 5]);

// Edu sizing
var eduImageHelper= function(healthData) {
  return to_string_scale(areaScale(linearEduScale(healthData)));
};

// TODO: Select svg2 for edu
var svg2= d3.select("#graph2");

var eduGenerator= function (d) {

//TODO: Change the fields which give data
  var image= svg2.append("g")
  .attr("transform", transformHelper(d.x, d.y, eduImageHelper, d.size));

  var innerimage= image.append("g")
  .attr("transform", "translate(-256, -185)")
  .attr("opacity", "0.75");

  innerimage.append("path")
  .attr("d", "M453.074,372.434c0,22.103-13.175,42.043-33.478,50.777C384.91,438.133,326.013,457.74,256,457.74  s-128.91-19.606-163.596-34.529c-20.303-8.734-33.478-28.675-33.478-50.777V158.48h394.147V372.434z")
  .style("fill", "#3E3D42");

  innerimage.append("path")
  .attr("d", "M58.927,158.48v213.954c0,22.085,13.151,42.029,33.437,50.759  c34.681,14.924,93.596,34.546,163.636,34.546c3.489,0,6.942-0.062,10.375-0.156c-4.353-10.536-6.189-20.93-6.745-29.969  c-0.995-16.202,7.674-31.467,21.963-39.166l171.481-92.403V158.48H58.927z")
  .style("fill", "#2D2D30");

  innerimage.append("path")
  .attr("d", "M220.041,46.575L15.109,159.435c-20.145,11.094-20.145,40.045,0,51.139l204.932,112.86  c22.388,12.329,49.531,12.329,71.919,0l204.932-112.86c20.145-11.094,20.145-40.045,0-51.139L291.96,46.575  C269.572,34.246,242.429,34.246,220.041,46.575z")
  .style("fill", "#57565C");

  innerimage.append("path")
  .attr("d", "M291.96,46.575c-22.388-12.329-49.531-12.329-71.919,0L15.109,159.435  c-20.145,11.094-20.145,40.045,0,51.139L220.04,323.434c22.388,12.329,49.531,12.329,71.919,0  C53.383,178.187,291.96,46.575,291.96,46.575z")
  .style("fill", "#3E3D42");

  innerimage.append("ellipse")
  .style("fill", "#FFEB99")
  .attr("cx", 256)
  .attr("cy", 185)
  .attr("rx", 37.437)
  .attr("ry", 22.464);

  innerimage.append("path")
  .attr("d", "M239.841,185.004c0-10.188,11.307-18.787,26.8-21.538c-3.374-0.6-6.942-0.926-10.641-0.926  c-20.678,0-37.441,10.058-37.441,22.464c0,12.406,16.763,22.464,37.441,22.464c3.697,0,7.267-0.327,10.641-0.926  C251.148,203.792,239.841,195.193,239.841,185.004z")
  .style("fill", "#FFDE55");

  innerimage.append("path")
  .attr("d", "M393.663,385.09c-4.268,0-7.726-3.458-7.726-7.726V271.803l-133.905-80.171  c-3.661-2.192-4.852-6.936-2.66-10.597c2.192-3.662,6.936-4.852,10.597-2.66l137.663,82.421c2.331,1.395,3.757,3.913,3.757,6.629  v109.94C401.39,381.632,397.93,385.09,393.663,385.09z")
  .style("fill", "#EEBF00");

  innerimage.append("path")
  .attr("d", "M417.72,409.869v54.175c0,5.87-4.758,10.628-10.628,10.628h-26.153  c-5.87,0-10.628-4.758-10.628-10.628v-54.961c0-13.24,10.854-23.943,24.148-23.7C407.509,385.622,417.72,396.818,417.72,409.869z")
  .style("fill", "#FFCD00");

  innerimage.append("path")
  .attr("d", "M394.016,464.044v-54.961c0-8.729,4.719-16.354,11.745-20.468c-3.327-1.982-7.171-3.158-11.301-3.233  c-13.296-0.243-24.148,10.461-24.148,23.7v54.961c0,5.87,4.758,10.628,10.628,10.628h23.704  C398.774,474.673,394.016,469.914,394.016,464.044z")
  .style("fill", "#EEBF00");

  innerimage.append("circle")
  .style("fill", "#FFEB99")
  .attr("cx", 394.014)
  .attr("cy", 383.217)
  .attr("r", 23.704)

  innerimage.append("path")
  .attr("d", "M394.016,383.219c0-8.773,4.769-16.426,11.852-20.525c-3.487-2.018-7.534-3.179-11.852-3.179  c-13.092,0-23.704,10.613-23.704,23.704s10.613,23.704,23.704,23.704c4.32,0,8.365-1.161,11.852-3.179  C398.784,399.646,394.016,391.992,394.016,383.219z")
  .style("fill", "#FFDE55");
}

// svg2.append("circle")
// .attr("r", 2)
// .attr("cx", 500)
// .attr("cy", 500);

// eduGenerator({"x": 500, "y":500, "size": 1})

// var exampleArray= [{"x": 40, "y":50, "size": 3},
// {"x": 850, "y":20, "size": 5},
// {"x": 500, "y":500, "size": 4},
// {"x": 50, "y":600, "size": 8},
// {"x": 900, "y":700, "size": 3}];
//
// exampleArray.forEach(function (d) {
//   svg2.append("circle")
//   .attr("r", 3)
//   .attr("cx", d.x)
//   .attr("cy", d.y)
// });
//
// exampleArray.forEach(function (d) {
//   eduGenerator(d);
// });

// Health linear
// TODO: Health data to linear scale
var linearHealthScale= d3.scaleLinear()
.domain([0, 20])
.range([0, 5]);

// Health sizing
var healthImageHelper= function(healthData) {
  return to_string_scale(areaScale(linearHealthScale(healthData)));
};

// TODO: Select svg2 for health
var svg2= d3.select("#graph2");

var healthGenerator= function (d) {

//TODO: Change the fields which give data
  var image= svg2.append("g")
  .attr("transform", transformHelper(d.x, d.y, healthImageHelper, d.size));

  var innerimage= image.append("g")
  .attr("transform", "translate(-204, -188)")
  .attr("opacity", "0.75");

  innerimage.append("path")
  .attr("d", "M245.685,215.694c31.903-30.012,71.505-67.284,76.951-100.446     c3.818-23.446,0.094-42.781-11.094-57.462c-11.298-14.819-28.459-23.275-52.512-25.852c-2.312-0.232-4.423-0.342-6.518-0.342     c-17.022,0-34.186,6.331-47.376,17.039c-13.173-10.708-30.352-17.039-47.341-17.039c-2.114,0-4.208,0.109-6.536,0.342     c-24.054,2.576-41.23,11.032-52.513,25.852C87.559,72.467,83.833,91.802,87.65,115.248     c5.447,33.178,45.048,70.435,76.953,100.446c0,0,15.921,15.983,20.699,20.08c3.604,3.088,11.395,9.295,19.849,9.295     c8.442,0,16.248-6.207,19.833-9.295C229.763,231.677,245.685,215.694,245.685,215.694z")
  .style("fill", "#D43D21");

  innerimage.append("path")
  .attr("d", "M148.829,267.338c-1.736-1.334-15.503-11.746-53.69-14.293c-2.096-0.17-4.223-1.66-6.086-2.9     c-0.454-0.303-0.911-0.611-1.367-0.922c-1.924-1.316-3.816-2.73-5.275-4.463c-2.915-3.492-6.22-6.426-8.998-10.305     c-18.558-25.883-36.76-31.066-39.479-32.105c-3.614-1.736-6.082-2.244-6.887-4.717c-0.327-1.148-3.477-31.205-4.038-36.25     c-1.564-14.494-3.117-25.232-11.42-28.148c-2.14-0.762-3.662-0.512-5.243,1.178c-1.896,1.988-3.011,12.51-3.556,19.166     c0,0-3.128,38.89-2.76,52.373s23.699,67.345,36.2,79.914s70.358,45.453,70.358,45.453c2.081,1.736,13.642,10.629,13.642,22.299     v13.152c0,0-1.649,12.17,11.686,12.17s31.834,0.053,45.001,0.053s10.598-11.891,10.608-16.057     c0.008-2.965,0.014-5.328,0.017-6.451c0.001-0.455,0.001-0.711,0.001-0.711c0.157-4.299,0.887-8.566,1.399-12.834     c1.458-4.887,0.295-14.121-0.389-17.705C180.731,290.368,151.961,269.776,148.829,267.338z")
  .style("fill", "#DEC8AE");

  innerimage.append("path")
  .attr("d", "M407.497,153.579c-0.545-6.656-1.66-17.178-3.556-19.166c-1.581-1.689-3.103-1.939-5.243-1.178     c-8.304,2.916-9.856,13.654-11.42,28.148c-0.561,5.045-3.711,35.102-4.038,36.25c-0.805,2.473-3.273,2.98-6.887,4.717     c-2.719,1.039-20.921,6.223-39.479,32.105c-2.778,3.879-6.083,6.813-8.998,10.305c-1.459,1.732-3.351,3.146-5.275,4.463     c-0.456,0.311-0.913,0.619-1.367,0.922c-1.864,1.24-3.99,2.73-6.086,2.9c-38.187,2.547-51.954,12.959-53.69,14.293     c-3.132,2.438-31.902,23.029-39.724,57.896c-0.684,3.584-1.847,12.818-0.389,17.705c0.512,4.268,1.242,8.535,1.399,12.834     c0,0,0,0.256,0.001,0.711c0.003,1.123,0.009,3.486,0.017,6.451c0.011,4.166-2.559,16.057,10.608,16.057     s31.666-0.053,45.001-0.053s11.686-12.17,11.686-12.17v-13.152c0-11.67,11.561-20.563,13.642-22.299     c0,0,62.396-35.971,70.358-45.453s34.675-66.764,36.2-79.914S407.497,153.579,407.497,153.579z")
  .style("fill", "#DEC8AE");
}

// svg2.append("circle")
// .attr("r", 2)
// .attr("cx", 500)
// .attr("cy", 500);

// healthGenerator({"x": 500, "y":500, "size": 1})

// var exampleArray= [{"x": 40, "y":50, "size": 3},
// {"x": 850, "y":20, "size": 5},
// {"x": 500, "y":500, "size": 4},
// {"x": 50, "y":600, "size": 8},
// {"x": 900, "y":700, "size": 3}];
//
// exampleArray.forEach(function (d) {
//   svg2.append("circle")
//   .attr("r", 3)
//   .attr("cx", d.x)
//   .attr("cy", d.y)
// });
//
// exampleArray.forEach(function (d) {
//   healthGenerator(d);
// });

// Corruption linear
// TODO: Corruption data to linear scale
var linearCorruptionScale= d3.scaleLinear()
.domain([0, 20])
.range([0, 5]);

// Corruption sizing
var corruptionImageHelper= function(corruptionData) {
  return to_string_scale(areaScale(linearCorruptionScale(corruptionData)));
};

// TODO: Select svg2 for corruption
var svg2= d3.select("#graph2");

var corruptionGenerator= function (d) {

//TODO: Change the fields which give data
  var image= svg2.append("g")
  .attr("transform", transformHelper(d.x, d.y, corruptionImageHelper, d.size));

  var innerimage= image.append("g")
  .attr("transform", "translate(-255, -265)")
  .attr("opacity", "0.75");

  innerimage.append("path")
  .attr("d", "M494.545,302.545c-2.327,0-4.655-1.164-5.818-3.491l-58.182-162.909   c-1.164-3.491,0-5.818,3.491-6.982c3.491-1.164,5.818,0,6.982,3.491l59.345,158.255c0,0-1.164,10.473-3.491,11.636   C495.709,302.545,495.709,302.545,494.545,302.545z")
  .style("fill", "#F6B545");

  innerimage.append("path")
  .attr("d", "M133.818,302.545c-2.327,0-4.655-1.164-5.818-3.491L69.818,136.145   c-1.164-3.491,0-5.818,3.491-6.982c3.491-1.164,5.818,0,6.982,3.491l59.345,158.255c0,0-1.164,10.473-3.491,11.636   C134.982,302.545,134.982,302.545,133.818,302.545z")
  .style("fill", "#F6B545");

  innerimage.append("path")
  .attr("d", "M465.455,139.636h-18.618c-24.436,0-47.709-6.982-68.655-18.618  c-31.418-18.618-72.145-20.945-105.891-4.655l-4.655-104.727C267.636,4.655,261.818,0,256,0s-11.636,4.655-11.636,11.636  L239.709,115.2c-33.745-15.127-73.309-13.964-105.891,4.655c-20.945,12.8-45.382,19.782-68.655,19.782H46.545  c-6.982,0-11.636,4.655-11.636,11.636c0,6.982,4.655,11.636,11.636,11.636h18.618c27.927,0,55.855-8.145,80.291-22.109  c27.927-16.291,64-16.291,91.927,1.164l-16.291,311.855l0,0c-5.818,0-59.345,30.255-59.345,30.255  c-5.818,2.327-10.473,10.473-10.473,16.291S157.091,512,162.909,512h186.182c5.818,0,11.636-5.818,11.636-11.636  s-4.655-13.964-10.473-16.291c0,0-52.364-30.255-59.345-30.255l0,0l-15.127-311.855c27.927-17.455,64-17.455,91.927-1.164  c24.436,15.127,52.364,22.109,80.291,22.109h17.455c6.982,0,11.636-4.655,11.636-11.636  C477.091,144.291,472.436,139.636,465.455,139.636z")
  .style("fill", "#C97629");

  innerimage.append("path")
  .attr("d", "M62.836,290.909h76.8v13.964c0,37.236-29.091,67.491-64,67.491l0,0c-34.909,0-64-30.255-64-67.491  v-13.964H62.836z")
  .style("fill", "#FFCB5B");

  innerimage.append("path")
  .attr("d", "M350.255,484.073c0,0-52.364-30.255-59.345-30.255l0,0L267.636,11.636   c0-6.982-11.636-11.636-11.636,0v442.182l15.127,30.255c3.491,8.145-2.327,16.291-10.473,16.291H151.273   c0,5.818,5.818,11.636,11.636,11.636h186.182c5.818,0,11.636-5.818,11.636-11.636S356.073,486.4,350.255,484.073z")
  .style("fill", "#B06328");

  innerimage.append("path")
  .attr("d", "M446.836,151.273c-26.764,0-52.364-6.982-74.473-20.945c-15.127-9.309-33.745-13.964-51.2-13.964   c-19.782,0-39.564,5.818-55.855,16.291L256,139.636l-6.982,9.309c3.491,2.327,9.309,2.327,12.8,0l9.309-6.982   c27.927-18.618,66.327-19.782,95.418-2.327c24.436,15.127,52.364,22.109,80.291,22.109h18.618c5.818,0,11.636-4.655,11.636-11.636   h-30.255V151.273z")
  .style("fill", "#B06328");

  innerimage.append("path")
  .attr("d", "M65.164,151.273c26.764,0,52.364-6.982,74.473-20.945c15.127-9.309,33.745-13.964,51.2-13.964   c19.782,0,39.564,5.818,55.855,16.291l9.309,6.982l6.982,9.309c-3.491,2.327-9.309,2.327-12.8,0l-9.309-6.982   c-27.927-18.618-66.327-19.782-95.418-2.327c-24.436,15.127-52.364,23.273-80.291,23.273H46.545   c-5.818,0-11.636-4.655-11.636-11.636H65.164z")
  .style("fill", "#B06328");

  innerimage.append("circle")
  .style("fill", "#FFCB5B")
  .attr("cx", 256)
  .attr("cy", 139.636)
  .attr("r", 34.909);

  innerimage.append("path")
  .attr("d", "M274.618,109.382c3.491,5.818,4.655,11.636,4.655,18.618c0,19.782-15.127,34.909-34.909,34.909  c-6.982,0-12.8-2.327-18.618-4.655c6.982,9.309,17.455,16.291,30.255,16.291c19.782,0,34.909-15.127,34.909-34.909  C290.909,126.836,283.927,116.364,274.618,109.382z")
  .style("fill", "#F6B545");

  innerimage.append("circle")
  .style("fill", "#FFE27A")
  .attr("cx", 238.545)
  .attr("cy", 133.818)
  .attr("r", 5.818);

  innerimage.append("path")
  .attr("d", "M17.455,302.545c-1.164,0-1.164,0-2.327,0c-2.327-1.164-3.491-11.636-3.491-11.636l58.182-159.418   C70.982,128,74.473,126.836,76.8,128c3.491,1.164,4.655,4.655,3.491,6.982L22.109,297.891   C22.109,301.382,19.782,302.545,17.455,302.545z")
  .style("fill", "#FFCB5B");

  innerimage.append("path")
  .attr("d", "M423.564,290.909h76.8v13.964c0,37.236-29.091,67.491-64,67.491l0,0c-34.909,0-64-30.255-64-67.491   v-13.964H423.564z")
  .style("fill", "#FFCB5B");

  innerimage.append("path")
  .attr("d", "M465.455,290.909v2.327c0,37.236-29.091,67.491-64,67.491h-1.164  c10.473,6.982,22.109,11.636,36.073,11.636c34.909,0,64-30.255,64-67.491v-13.964H465.455z")
  .style("fill", "#F6B545");

  innerimage.append("path")
  .attr("d", "M378.182,302.545c-1.164,0-1.164,0-2.327,0c-3.491-1.164-3.491-11.636-3.491-11.636l58.182-159.418  c1.164-3.491,4.655-4.655,6.982-3.491c3.491,1.164,4.655,4.655,3.491,6.982l-58.182,162.909  C382.836,301.382,380.509,302.545,378.182,302.545z")
  .style("fill", "#FFCB5B");

  innerimage.append("path")
  .attr("d", "M424.727,314.182h-34.909c-3.491,0-5.818-2.327-5.818-5.818l0,0c0-3.491,2.327-5.818,5.818-5.818  h34.909c3.491,0,5.818,2.327,5.818,5.818l0,0C430.545,311.855,428.218,314.182,424.727,314.182z")
  .style("fill", "#FFE27A");

  innerimage.append("path")
  .attr("d", "M104.727,290.909v2.327c0,37.236-29.091,67.491-64,67.491h-1.164  c10.473,6.982,22.109,11.636,36.073,11.636c34.909,0,64-30.255,64-67.491v-13.964H104.727z")
  .style("fill", "#F6B545");

  innerimage.append("path")
  .attr("d", "M64,314.182H29.091c-3.491,0-5.818-2.327-5.818-5.818l0,0c0-3.491,2.327-5.818,5.818-5.818H64  c3.491,0,5.818,2.327,5.818,5.818l0,0C69.818,311.855,67.491,314.182,64,314.182z")
  .style("fill", "#FFE27A");
}

// svg2.append("circle")
// .attr("r", 2)
// .attr("cx", 500)
// .attr("cy", 500);
//
// corruptionGenerator({"x": 500, "y":500, "size": 1})

// var exampleArray= [{"x": 40, "y":50, "size": 3},
// {"x": 850, "y":20, "size": 5},
// {"x": 500, "y":500, "size": 4},
// {"x": 50, "y":600, "size": 8},
// {"x": 900, "y":700, "size": 3}];
//
// exampleArray.forEach(function (d) {
//   corruptionGenerator(d);
// });
//
// exampleArray.forEach(function (d) {
//   svg2.append("circle")
//   .attr("r", 3)
//   .attr("cx", d.x)
//   .attr("cy", d.y)
// });

</script>
</html>
