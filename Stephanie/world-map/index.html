<html>
<head>
<title>3300 - stephanie p1</title>
  <link href="https://fonts.googleapis.com/css?family=Barlow+Condensed" rel="stylesheet">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/default.min.css">
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script src="http://d3js.org/topojson.v2.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
<style>
  body { font-family: 'Barlow Condensed', Calibri, sans-serif; }
  svg { border: solid #ccc 1px; }
  path.country { fill: #ccc; stroke: #888;; }
</style>
</head>

<body>

<!-- Here's an SVG element. Note that in this file it looks like the <div> above. -->
<svg height="600" width="900" viewbox="140 50 400 300">
  <!-- Visual elements are represented by tags, which have attributes -->
</svg>

<script id="notes">

var svg = d3.select("svg");

var projection = d3.geoEquirectangular().scale(75);
var pathGenerator = d3.geoPath().projection(projection);

var rawData;
var countries;

d3.json("world-50m.json", function (error, data) {
  rawData = data;
  
  console.log("Code in the call-back function is only executed when the data file loads.");
  
  countries = topojson.feature(rawData, rawData.objects.countries);
  showMap();
});

// Cooridnates for "Null Island" and Ithaca
var interestingPoints = [[0,0], [-76, 42]]; 
// Remember that Longitude is X! We usually 
// write coordinates as lat/long, but always
// flip them for plotting.

function showMap() {
  // Create or modify paths for each country
  
  // This is like the "range" function
  //  in a linear scale.
  projection.fitExtent([[0,0], [svg.attr("width"), svg.attr("height")]], countries);
  
  // This function is like our line
  //  generator function, but it knows
  //  about projections.
  pathGenerator = d3.geoPath().projection(projection);
  
  // Step 1: grab all existing paths
  var paths = svg.selectAll("path.country")
  .data(countries.features);
  console.log(paths.size());
  
  // Step 2: add any additional paths, 
  //  and merge them with the existing paths
  paths = paths.enter().append("path")
  .attr("class", "country").merge(paths);
  console.log(paths.size());
  
  // Update the path coordinates.
  paths.attr("d", function (country) {
    return pathGenerator(country);
  });
  
  // Again! Step 1: grab all existing
  //  circles.
  var circles = svg.selectAll("circle")
  .data(interestingPoints);
  
  // Step 2: remove unneeded circles if any
  circles.exit().remove();
  
  // Step 3: add additional circles if needed
  circles = circles.enter().append("circle")
  .attr("r", 3).merge(circles);
  
  // Reset the aesthetic properties.
  circles
  .attr("cx", function (d) {
    return projection(d)[0];
  })
  .attr("cy", function (d) {
    return projection(d)[1];
  });
  
}


console.log("Code after the d3.json() call is executed immediately.");

</script>

<!-- This block will be automatically filled with syntax-highlighted code from the script below -->
<pre><code id="display">
</code></pre>



</body>
</html>
